Index: src/routes/site/alerte/+page.svelte
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><script lang=\"ts\">\n    import {\n        Button,\n        Input,\n        Table,\n        TableBody,\n        TableBodyCell,\n        TableBodyRow,\n        TableHead,\n        TableHeadCell,\n        Modal\n    } from \"flowbite-svelte\";\n\n    import { onMount } from \"svelte\";\n    import { apiFetch } from \"$lib/api\";\n    import Slide from \"$components/Slide.svelte\";\n    import Footer from \"$components/Footer.svelte\";\n\n    export let data;\n    let user = data?.user;\n    let main_data: any[] = [];\n    let searchQuery = \"\";\n    let loading = false;\n    let isEditMode = false;\n    let current_data: any = {};\n\n    let alerte = {\n        destinataire: \"Adminisration DEPPS\",\n        objet: \"\",\n        message: \"\",\n    };\n\n    let recipients : any = [];\n\n    async function getDestinataire() {\n        try {\n            const response = await fetch('https://depps.leadagro.net/api/destinateur/');\n            if (!response.ok) {\n                throw new Error('Échec de la récupération des destinataires');\n            }\n            const data = await response.json();\n            recipients = data.data;\n            console.log(\"content recipient\", recipients);\n        } catch (error) {\n            console.error('Erreur:', error);\n        }\n    }\n\n    async function fetchData(userId:number) {\n        loading = true;\n        try {\n            const res = await apiFetch(true,`/alerte/get/all/${userId}`);\n            if (res) {\n                main_data = res.data;\n                console.log(\"content main_data\",main_data)\n            } else {\n                console.error(\"Erreur de récupération:\", res.statusText);\n            }\n        } catch (error) {\n            console.error(\"Erreur API:\", error);\n        } finally {\n            loading = false;\n        }\n    }\n\n    onMount(() => {\n        fetchData(user.id);\n        getDestinataire();\n\n    });\n\n    async function saveAlerte() {\n        loading = true;\n        try {\n            const url = isEditMode\n                ? `https://depps.leadagro.net/api/alerte/update/${current_data.id}`\n                : \"https://depps.leadagro.net/api/alerte/create\";\n\n            const method = isEditMode ? \"PUT\" : \"POST\";\n\n            const res = await fetch(url, {\n                method,\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    user: data.user.id,\n                    destinateur: alerte.destinataire,\n                    objet: alerte.objet,\n                    message: alerte.message,\n                    userUpdate: data.user.id\n                }),\n            });\n            if (res.ok) {\n                resetForm();\n                await fetchData(user.id);\n            }\n        } catch (error) {\n            console.error(\"Erreur lors de l'enregistrement:\", error);\n        } finally {\n            loading = false;\n        }\n    }\n\n    function resetForm() {\n        alerte = { destinataire: \"Adminisration DEPPS\", objet: \"\", message: \"\" };\n        isEditMode = false;\n        current_data = {};\n    }\n\n    function editAlerte(item) {\n        alerte = { ...item };\n        current_data = item;\n        isEditMode = true;\n\n        alerte.destinataire = item?.destinateur?.id || '';\n    }\n\n    async function deleteAlerte(alertId:number) {\n        loading = true;\n        try {\n            const res = await apiFetch(true,`/alerte/delete/${alertId}`, \"DELETE\")\n            if (res.ok) {\n                await fetchData(user.id);\n            }\n        } catch (error) {\n            console.error(\"Erreur suppression:\", error);\n        } finally {\n            loading = false;\n        }\n    }\n</script>\n\n<Slide user={user} />\n<section class=\"main-content p-6\">\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <!-- Formulaire -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md col-span-1\">\n            <h4 class=\"text-xl font-semibold mb-4\">{isEditMode ? \"Modifier\" : \"Ajouter\"} une alerte</h4>\n\n            <div class=\"mb-4\">\n                <label class=\"block text-sm font-medium text-gray-700\">Destinataire</label>\n                <select\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-200\"\n                        bind:value={alerte.destinataire}\n                >\n                    {#each recipients as recipient}\n                        <option value={recipient.id}>{recipient.libelle}</option>\n                    {/each}\n                </select>\n            </div>\n\n            <div class=\"mb-4\">\n                <label class=\"block text-sm font-medium text-gray-700\">Objet</label>\n                <Input\n                        type=\"text\"\n                        bind:value={alerte.objet}\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-200\"\n                />\n            </div>\n\n\n            <div class=\"mb-4\">\n                <label class=\"block text-sm font-medium text-gray-700\">Message</label>\n                <textarea\n                        bind:value={alerte.message}\n                        class=\"w-full p-2 border border-gray-300 rounded-md focus:ring focus:ring-blue-200\"\n                        rows=\"4\"\n                ></textarea>\n            </div>\n\n            <Button on:click={saveAlerte} class=\"w-full bg-blue-600 hover:bg-blue-700 text-white\">\n                {isEditMode ? \"Modifier\" : \"Ajouter\"}\n            </Button>\n        </div>\n\n        <!-- Tableau -->\n        <div class=\"bg-white p-6 rounded-lg shadow-md col-span-2\">\n            <div class=\"flex justify-between items-center mb-4\">\n                <h4 class=\"text-xl font-semibold text-gray-800\">Liste des alertes</h4>\n            </div>\n\n            <div class=\"mb-4\">\n                <Input placeholder=\"Rechercher...\" type=\"text\" bind:value={searchQuery} class=\"w-full input-search\" />\n            </div>\n\n            <Table class=\"border border-gray-300\">\n                <TableHead class=\"bg-gray-100 border-b\">\n                    {#each [\"Destinataire\", \"Objet\", \"Message\", \"Action\"] as title}\n                        <TableHeadCell class=\"px-4 py-2\">{title}</TableHeadCell>\n                    {/each}\n                </TableHead>\n                <TableBody>\n                    {#if loading && main_data.length === 0}\n                        <TableBodyRow>\n                            <TableBodyCell colspan={4} class=\"text-center py-4\">Chargement...</TableBodyCell>\n                        </TableBodyRow>\n                    {:else if main_data.length === 0}\n                        <TableBodyRow>\n                            <TableBodyCell colspan={4} class=\"text-center py-4\">Aucune alerte trouvée</TableBodyCell>\n                        </TableBodyRow>\n                    {:else}\n                        {#each main_data as item}\n                            <TableBodyRow class=\"text-sm\">\n                                <TableBodyCell class=\"px-4 py-2 table-cell\">{item?.destinateur?.libelle}</TableBodyCell>\n                                <TableBodyCell class=\"px-4 py-2 table-cell\">{item.objet}</TableBodyCell>\n                                <TableBodyCell class=\"px-4 py-2 table-cell\">{item.message}</TableBodyCell>\n                                <TableBodyCell class=\"px-2 py-2 table-cell\">\n                                    <button on:click={() => editAlerte(item)} class=\"text-blue-500 mr-2\">\n                                        ✏\uFE0F\n                                    </button>\n                                    <button on:click={() => deleteAlerte(item.id)} class=\"text-red-500\">\n                                        \uD83D\uDDD1\uFE0F\n                                    </button>\n                                </TableBodyCell>\n                            </TableBodyRow>\n                        {/each}\n                    {/if}\n                </TableBody>\n            </Table>\n        </div>\n    </div>\n</section>\n\n<!-- Modal de confirmation -->\n<!--<Modal bind:open={showDeleteModal} title=\"Confirmation\">\n    <p>Voulez-vous vraiment supprimer cette alerte ?</p>\n    <div class=\"flex justify-end space-x-4 mt-4\">\n        <Button on:click={() => (showDeleteModal = false)} class=\"bg-gray-500 text-white\">Annuler</Button>\n        <Button on:click={deleteAlerte} class=\"bg-red-600 text-white\">Supprimer</Button>\n    </div>\n</Modal>-->\n\n<Footer />\n\n<style>\n\n    .main-content label {\n        font-size: 15px;\n        margin-bottom: 10px;\n    }\n    .main-content {\n        margin-top: 135px;\n    }\n\n    h4 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n    }\n\n    .main-content input {\n        height: 32px;\n    }\n\n    .input-search {\n        height: 28px !important;\n        width: 30%;\n    }\n\n    .table-cell {\n        font-size: 1.2rem;\n    }\n\n    label {\n        font-size: 1rem;\n    }\n\n    button {\n        font-size: 1.1rem;\n    }\n\n    table td {\n        font-size: 15px;\n    }\n\n    table th {\n        font-size: 12px;\n    }\n\n    table td button {\n        font-size: 18px !important;\n    }\n\n\n</style>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/routes/site/alerte/+page.svelte b/src/routes/site/alerte/+page.svelte
--- a/src/routes/site/alerte/+page.svelte	(revision b95ab4437354de6633fd31aea4b15636a398ea77)
+++ b/src/routes/site/alerte/+page.svelte	(date 1739981230342)
@@ -252,7 +252,7 @@
 
     .input-search {
         height: 28px !important;
-        width: 30%;
+        width: 30% !important;
     }
 
     .table-cell {
@@ -268,16 +268,14 @@
     }
 
     table td {
-        font-size: 15px;
+        font-size: 15px !important;
     }
 
     table th {
-        font-size: 12px;
+        font-size: 12px !important;
     }
 
     table td button {
         font-size: 18px !important;
     }
-
-
 </style>
